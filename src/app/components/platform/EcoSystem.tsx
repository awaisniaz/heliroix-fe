"use client";

import type { ReactNode } from "react";
import { motion, type Variants } from "framer-motion";

type AgentItem = {
  icon: ReactNode;
  title: string;
  description: string;
  subtitle: string;
};

// Typed easing tuple so TS treats it as a valid Easing
const EASE_MAIN: [number, number, number, number] = [0.2, 0.8, 0.3, 0.98];

const textGroupVariants: Variants = {
  hidden: {},
  visible: {
    transition: {
      staggerChildren: 0.14,
    },
  },
};

const textItemVariants: Variants = {
  hidden: { opacity: 0, y: 18 },
  visible: {
    opacity: 1,
    y: 0,
    transition: {
      duration: 0.8,
      ease: EASE_MAIN,
    },
  },
};

const cardsContainerVariants: Variants = {
  hidden: {},
  visible: {
    transition: {
      staggerChildren: 0.16,
      delayChildren: 0.15,
    },
  },
};

const cardVariants: Variants = {
  hidden: { opacity: 0, y: 26, scale: 0.97 },
  visible: {
    opacity: 1,
    y: 0,
    scale: 1,
    transition: {
      duration: 0.95,
      ease: EASE_MAIN,
    },
  },
};

export default function EcoSystem() {
  const data = [
    {
      id: "layout_agent",
      title: "Layout Agent",
      description:
        "Places trackers/fixed-tilt arrays with optimized GCR and spacing.",
      subtitle: "Perfectly aligned layouts within boundaries.",
      icon: (
        <svg
          width={40}
          height={40}
          viewBox="0 0 40 40"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M21.516 1.83344C21.0343 1.61371 20.511 1.5 19.9815 1.5C19.452 1.5 18.9287 1.61371 18.447 1.83344L2.60289 9.04372C2.27482 9.18838 1.99589 9.42531 1.80007 9.72566C1.60426 10.026 1.5 10.3768 1.5 10.7354C1.5 11.0939 1.60426 11.4447 1.80007 11.7451C1.99589 12.0454 2.27482 12.2824 2.60289 12.427L18.4655 19.6558C18.9472 19.8755 19.4705 19.9892 20 19.9892C20.5295 19.9892 21.0528 19.8755 21.5345 19.6558L37.3971 12.4455C37.7252 12.3008 38.0041 12.0639 38.1999 11.7636C38.3957 11.4632 38.5 11.1124 38.5 10.7539C38.5 10.3953 38.3957 10.0445 38.1999 9.74415C38.0041 9.4438 37.7252 9.20687 37.3971 9.06221L21.516 1.83344Z"
            stroke="#5FF0BD"
            strokeWidth={3}
            strokeLinecap="round"
            strokeLinejoin="round"
          />
          <path
            d="M1.50001 19.9883C1.49913 20.3419 1.59968 20.6883 1.78974 20.9865C1.9798 21.2847 2.25139 21.5222 2.5723 21.6707L18.4719 28.8994C18.9511 29.1164 19.4711 29.2287 19.9971 29.2287C20.5232 29.2287 21.0432 29.1164 21.5224 28.8994L37.385 21.6892C37.7123 21.5421 37.9896 21.3029 38.1833 21.0009C38.377 20.6989 38.4786 20.3471 38.4758 19.9883"
            stroke="#5FF0BD"
            strokeWidth={3}
            strokeLinecap="round"
            strokeLinejoin="round"
          />
          <path
            d="M1.50001 29.2323C1.49913 29.5859 1.59968 29.9324 1.78974 30.2306C1.9798 30.5287 2.25139 30.7662 2.5723 30.9147L18.4719 38.1435C18.9511 38.3605 19.4711 38.4727 19.9971 38.4727C20.5232 38.4727 21.0432 38.3605 21.5224 38.1435L37.385 30.9332C37.7123 30.7861 37.9896 30.547 38.1833 30.2449C38.377 29.9429 38.4786 29.5911 38.4758 29.2323"
            stroke="#5FF0BD"
            strokeWidth={3}
            strokeLinecap="round"
            strokeLinejoin="round"
          />
        </svg>
      ),
    },
    {
      id: "slope_agent",
      title: "Slope Agent",
      description: "Analyzes grading, cut/fill, and slope limits.",
      subtitle: "Identifies terrain risks before construction.",
      icon: (
        <svg
          width={35}
          height={31}
          viewBox="0 0 35 31"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M3.28125 1.66071V27.6786H33.3594C33.7945 27.6786 34.2118 27.8535 34.5195 28.165C34.8271 28.4764 35 28.8988 35 29.3393C35 29.7797 34.8271 30.2021 34.5195 30.5136C34.2118 30.825 33.7945 31 33.3594 31H1.64062C1.2055 31 0.788205 30.825 0.480528 30.5136C0.172851 30.2021 0 29.7797 0 29.3393L0 1.66071C0 1.22027 0.172851 0.797856 0.480528 0.486412C0.788205 0.174968 1.2055 0 1.64062 0C2.07575 0 2.49305 0.174968 2.80072 0.486412C3.1084 0.797856 3.28125 1.22027 3.28125 1.66071ZM34.5187 7.26286L23.0344 18.8879C22.7268 19.1989 22.3098 19.3735 21.875 19.3735C21.4402 19.3735 21.0232 19.1989 20.7156 18.8879L15.3125 13.4186L9.3625 19.4414C9.05156 19.7351 8.64009 19.8951 8.21486 19.8877C7.78962 19.8803 7.38386 19.706 7.08312 19.4016C6.7824 19.0972 6.61022 18.6864 6.60287 18.256C6.59553 17.8255 6.75359 17.409 7.04375 17.0943L14.1531 9.89786C14.4607 9.58686 14.8777 9.41218 15.3125 9.41218C15.7473 9.41218 16.1643 9.58686 16.4719 9.89786L21.875 15.3671L32.2 4.91571C32.5109 4.62201 32.9224 4.462 33.3476 4.46944C33.7729 4.47687 34.1786 4.65117 34.4794 4.95557C34.7801 5.25999 34.9523 5.67072 34.9596 6.10116C34.967 6.5316 34.8089 6.94811 34.5187 7.26286Z"
            fill="#5FF0BD"
          />
        </svg>
      ),
    },
    {
      id: "foundation_agent",
      title: "Foundation Agent",
      description:
        "Selects pile types and depths based on soil and wind zones.",
      subtitle: "Structural safety and cost efficiency.",
      icon: (
        <svg
          width={39}
          height={42}
          viewBox="0 0 39 42"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            fillRule="evenodd"
            clipRule="evenodd"
            d="M20.2136 40.5668L20.1907 40.5707L20.0552 40.6374L20.017 40.6451L19.9903 40.6374L19.8548 40.5687C19.8345 40.5637 19.8192 40.5675 19.809 40.5802L19.8014 40.5993L19.769 41.416L19.7785 41.4542L19.7976 41.479L19.9961 41.6202L20.0247 41.6279L20.0476 41.6202L20.246 41.479L20.2689 41.4485L20.2766 41.416L20.2441 40.6012C20.239 40.5808 20.2289 40.5694 20.2136 40.5668ZM20.7174 40.3512L20.6907 40.355L20.3396 40.5325L20.3205 40.5516L20.3147 40.5726L20.3491 41.3931L20.3586 41.416L20.3739 41.4313L20.7575 41.6069C20.7816 41.6132 20.8001 41.6081 20.8128 41.5916L20.8204 41.5649L20.7556 40.3932C20.7492 40.369 20.7365 40.355 20.7174 40.3512ZM19.353 40.355C19.3445 40.3499 19.3345 40.3483 19.3249 40.3504C19.3153 40.3525 19.3069 40.3583 19.3014 40.3665L19.29 40.3932L19.2251 41.5649C19.2264 41.5878 19.2372 41.6031 19.2575 41.6107L19.2862 41.6069L19.6697 41.4294L19.6888 41.4141L19.6945 41.3931L19.7289 40.5726L19.7232 40.5497L19.7041 40.5306L19.353 40.355Z"
            fill="#5FF0BD"
          />
          <path
            fillRule="evenodd"
            clipRule="evenodd"
            d="M19.0832 0C19.5893 0 20.0747 0.201054 20.4325 0.558933C20.7904 0.916811 20.9915 1.4022 20.9915 1.90832V3.93495C22.3725 4.10775 23.7233 4.46858 25.0066 5.00742L26.018 3.25559C26.1424 3.03681 26.3088 2.84479 26.5077 2.6906C26.7066 2.5364 26.934 2.42307 27.1769 2.35713C27.4198 2.29119 27.6733 2.27395 27.9229 2.30638C28.1724 2.33882 28.4131 2.42031 28.6311 2.54614C28.849 2.67198 29.0399 2.83969 29.1928 3.0396C29.3457 3.23952 29.4575 3.4677 29.5218 3.71101C29.5862 3.95432 29.6017 4.20795 29.5676 4.4573C29.5335 4.70665 29.4505 4.94679 29.3232 5.1639L28.3099 6.91955C29.4167 7.75921 30.4052 8.74963 31.2487 9.85836L33.0043 8.84313C33.2214 8.71585 33.4616 8.63278 33.7109 8.59868C33.9603 8.56459 34.2139 8.58015 34.4572 8.64448C34.7005 8.70881 34.9287 8.82063 35.1286 8.9735C35.3285 9.12637 35.4962 9.31728 35.6221 9.53523C35.7479 9.75318 35.8294 9.99387 35.8618 10.2434C35.8943 10.493 35.877 10.7465 35.8111 10.9894C35.7451 11.2323 35.6318 11.4597 35.4776 11.6586C35.3234 11.8575 35.1314 12.0239 34.9126 12.1483L33.157 13.1597C33.6894 14.4211 34.0558 15.7684 34.2314 17.1748H36.258C36.7641 17.1748 37.2495 17.3759 37.6074 17.7338C37.9653 18.0917 38.1663 18.577 38.1663 19.0832C38.1663 19.5893 37.9653 20.0747 37.6074 20.4325C37.2495 20.7904 36.7641 20.9915 36.258 20.9915H34.2314C34.0586 22.3725 33.6977 23.7233 33.1589 25.0066L34.9107 26.018C35.1295 26.1424 35.3215 26.3088 35.4757 26.5077C35.6299 26.7066 35.7432 26.934 35.8092 27.1769C35.8751 27.4198 35.8924 27.6733 35.8599 27.9229C35.8275 28.1724 35.746 28.4131 35.6202 28.6311C35.4943 28.849 35.3266 29.0399 35.1267 29.1928C34.9268 29.3457 34.6986 29.4575 34.4553 29.5218C34.212 29.5862 33.9584 29.6017 33.709 29.5676C33.4597 29.5335 33.2195 29.4505 33.0024 29.3232L31.2468 28.3099C30.4057 29.4188 29.4169 30.4076 28.308 31.2487L29.3232 33.0043C29.4505 33.2214 29.5335 33.4616 29.5676 33.7109C29.6017 33.9603 29.5862 34.2139 29.5218 34.4572C29.4575 34.7005 29.3457 34.9287 29.1928 35.1286C29.0399 35.3285 28.849 35.4962 28.6311 35.6221C28.4131 35.7479 28.1724 35.8294 27.9229 35.8618C27.6733 35.8943 27.4198 35.877 27.1769 35.8111C26.934 35.7451 26.7066 35.6318 26.5077 35.4776C26.3088 35.3234 26.1424 35.1314 26.018 34.9126L25.0066 33.157C23.7234 33.6965 22.3726 34.0579 20.9915 34.2314V36.258C20.9915 36.7641 20.7904 37.2495 20.4325 37.6074C20.0747 37.9653 19.5893 38.1663 19.0832 38.1663C18.577 38.1663 18.0917 37.9653 17.7338 37.6074C17.3759 37.2495 17.1748 36.7641 17.1748 36.258V34.2314C15.7938 34.0586 14.443 33.6977 13.1597 33.1589L12.1483 34.9107C12.0239 35.1295 11.8575 35.3215 11.6586 35.4757C11.4597 35.6299 11.2323 35.7432 10.9894 35.8092C10.7465 35.8751 10.493 35.8924 10.2434 35.8599C9.99387 35.8275 9.75318 35.746 9.53523 35.6202C9.31728 35.4943 9.12637 35.3266 8.9735 35.1267C8.82063 34.9268 8.70881 34.6986 8.64448 34.4553C8.58015 34.212 8.56459 33.9584 8.59868 33.709C8.63278 33.4597 8.71585 33.2195 8.84313 33.0024L9.85645 31.2468C8.74746 30.4057 7.7587 29.4169 6.91764 28.308L5.16199 29.3232C4.94488 29.4505 4.70474 29.5335 4.45539 29.5676C4.20604 29.6017 3.95241 29.5862 3.7091 29.5218C3.4658 29.4575 3.23761 29.3457 3.0377 29.1928C2.83778 29.0399 2.67007 28.849 2.54424 28.6311C2.4184 28.4131 2.33692 28.1724 2.30448 27.9229C2.27204 27.6733 2.28928 27.4198 2.35522 27.1769C2.42116 26.934 2.53449 26.7066 2.68869 26.5077C2.84288 26.3088 3.0349 26.1424 3.25368 26.018L5.00933 25.0066C4.46918 23.7235 4.10706 22.3726 3.93304 20.9915H1.90832C1.4022 20.9915 0.916811 20.7904 0.558933 20.4325C0.201054 20.0747 0 19.5893 0 19.0832C0 18.577 0.201054 18.0917 0.558933 17.7338C0.916811 17.3759 1.4022 17.1748 1.90832 17.1748H3.93495C4.10775 15.7938 4.46858 14.443 5.00742 13.1597L3.25559 12.1483C2.82086 11.8935 2.50458 11.477 2.37578 10.9898C2.24698 10.5026 2.3161 9.98429 2.56807 9.54789C2.82004 9.11148 3.23439 8.79245 3.72071 8.66041C4.20703 8.52838 4.72583 8.59407 5.1639 8.84313L6.91955 9.85645C7.75921 8.74963 8.74963 7.76112 9.85836 6.91764L8.84313 5.16199C8.59407 4.72392 8.52838 4.20512 8.66041 3.7188C8.79245 3.23248 9.11148 2.81813 9.54789 2.56616C9.98429 2.31419 10.5026 2.24507 10.9898 2.37387C11.477 2.50268 11.8935 2.81895 12.1483 3.25368L13.1597 5.00933C14.4428 4.46918 15.7937 4.10706 17.1748 3.93304V1.90832C17.1748 1.4022 17.3759 0.916811 17.7338 0.558933C18.0917 0.201054 18.577 0 19.0832 0ZM19.0832 21.2873L10.2591 26.3825C11.111 27.4121 12.1367 28.2847 13.2895 28.9606L13.4288 29.0427C15.1528 30.0205 17.1011 30.534 19.0832 30.533C20.9342 30.533 22.6822 30.0941 24.2299 29.3136L24.8787 28.9606C26.031 28.2839 27.056 27.4107 27.9072 26.3806L19.0832 21.2873ZM17.1748 7.79165C16.0443 7.98251 14.9487 8.3421 13.925 8.8584L13.4288 9.12556L13.2895 9.20571C11.7724 10.0958 10.4808 11.3234 9.51486 12.7933L9.20571 13.2895L9.12556 13.4288C8.14708 15.1526 7.63288 17.101 7.63326 19.0832C7.63326 20.2854 7.81837 21.4495 8.16377 22.5372L8.34888 23.0773L17.1748 17.9821V7.79165ZM20.9915 7.79165V17.9821L29.8174 23.0773C30.2919 21.7991 30.5342 20.4465 30.533 19.0832C30.533 17.2321 30.0941 15.4841 29.3136 13.9364L29.0407 13.4288L28.9797 13.3239L28.9606 13.2895C28.0705 11.7724 26.8429 10.4808 25.373 9.51486L24.7375 9.12366C23.7457 8.56069 22.6754 8.14903 21.5621 7.90233L20.9915 7.79165Z"
            fill="#5FF0BD"
          />
        </svg>
      ),
    },
    {
      id: "ebos_agent",
      title: "EBOS Agent",
      description: "Automates string sizing and conduit routing.",
      subtitle: "Faster electrical balance-of-system design.",
      icon: (
        <svg
          width={35}
          height={35}
          viewBox="0 0 35 35"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <rect
            x="1.5"
            y="1.5"
            width={32}
            height={32}
            rx="3.5"
            stroke="#5FF0BD"
            strokeWidth={3}
          />
          <path
            d="M25.5 2V10C25.5 11.1046 24.6046 12 23.5 12H15.5"
            stroke="#5FF0BD"
            strokeWidth={3}
          />
          <path
            d="M9.5 33L9.5 25C9.5 23.8954 10.3954 23 11.5 23L19.5 23"
            stroke="#5FF0BD"
            strokeWidth={3}
          />
          <circle cx="12.5" cy="12.5" r={4} stroke="#5FF0BD" strokeWidth={3} />
          <circle cx="23.5" cy="22.5" r={4} stroke="#5FF0BD" strokeWidth={3} />
        </svg>
      ),
    },
    {
      id: "compliance_agent",
      title: "Compliance Agent",
      description: "Validates designs with rulepacks and auto-fix suggestions.",
      subtitle: "100% explainable, risk-compliant outputs.",
      icon: (
        <svg
          width={35}
          height={44}
          viewBox="0 0 35 44"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M17.5 2.18945L18.3619 0.176946C18.0895 0.0601993 17.7963 0 17.5 0C17.2037 0 16.9105 0.0601993 16.6381 0.176946L17.5 2.18945ZM17.5 41.5644L16.415 43.4632C16.7455 43.652 17.1194 43.7512 17.5 43.7512C17.8806 43.7512 18.2545 43.652 18.585 43.4632L17.5 41.5644ZM16.6381 0.179134L2.65125 6.1707L4.375 10.1957L18.3619 4.20195L16.6381 0.179134ZM3.32062e-07 10.1935V25.1998H4.375V10.1935H3.32062e-07ZM7.71531 38.4932L16.415 43.4632L18.585 39.6657L9.88531 34.6935L7.71531 38.4932ZM18.585 43.4632L27.2847 38.4932L25.1147 34.6935L16.415 39.6657L18.585 43.4632ZM35 25.1976V10.1957H30.625V25.2019L35 25.1976ZM32.3488 6.17288L18.3619 0.179134L16.6381 4.19976L30.625 10.1957L32.3488 6.17288ZM35 10.1957C34.9999 9.33963 34.7487 8.50241 34.2774 7.78774C33.8061 7.07307 33.1356 6.51017 32.3488 6.17288L30.625 10.1957H35ZM27.2847 38.4932C29.6289 37.1536 31.5772 35.2203 32.9322 32.8849C34.2871 30.5496 35.0005 27.8975 35 25.1976H30.625C30.6248 27.1258 30.1148 29.0198 29.1467 30.6874C28.1786 32.355 26.7868 33.7371 25.1125 34.6935L27.2847 38.4932ZM3.32062e-07 25.1976C-0.000120638 27.8971 0.713446 30.5488 2.06838 32.8837C3.4233 35.2186 5.37143 37.1538 7.71531 38.4932L9.88531 34.6935C8.21201 33.7372 6.82112 32.3557 5.85347 30.6889C4.88583 29.0221 4.37579 27.1292 4.375 25.2019L3.32062e-07 25.1976ZM2.65125 6.1707C1.86409 6.50813 1.19328 7.07137 0.721995 7.78647C0.250707 8.50156 -0.000333273 9.33926 3.32062e-07 10.1957H4.375L2.65125 6.1707Z"
            fill="#5FF0BD"
          />
          <path
            d="M24.0625 17.5022L15.3125 26.2522L10.9375 21.8772"
            stroke="#5FF0BD"
            strokeWidth={2}
            strokeLinecap="round"
            strokeLinejoin="round"
          />
        </svg>
      ),
    },
    {
      id: "genesis_agent",
      title: "Genesis Agent",
      description: "Reads SOPs, converts PDFs to digital rules.",
      subtitle: "Your company standards become machine-readable.",
      icon: (
        <svg
          width={41}
          height={34}
          viewBox="0 0 41 34"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M20.5 32.5C17.725 30.5719 14.5124 29.3433 11.1438 28.9297C8.75461 28.4506 6.32049 28.2243 3.8827 28.2546C3.57078 28.2572 3.2614 28.1989 2.97243 28.0829C2.68347 27.967 2.42063 27.7956 2.19911 27.5789C1.97758 27.3621 1.80175 27.1042 1.68175 26.82C1.56176 26.5358 1.49999 26.2309 1.5 25.923L1.54313 3.83819C1.54182 3.24562 1.76915 2.67479 2.17892 2.24171C2.58869 1.80863 3.15015 1.54581 3.74919 1.50665C6.23078 1.45796 8.71034 1.67687 11.1438 2.15948C14.5088 2.58799 17.7188 3.81363 20.5 5.73182M20.5 32.5V5.73182M20.5 32.5C23.275 30.5719 26.4876 29.3433 29.8562 28.9297C32.2454 28.4506 34.6795 28.2243 37.1173 28.2546C37.4292 28.2572 37.7386 28.1989 38.0276 28.0829C38.3165 27.967 38.5794 27.7956 38.8009 27.5789C39.0224 27.3621 39.1983 27.1042 39.3182 26.82C39.4382 26.5358 39.5 26.2309 39.5 25.923L39.4548 3.83819C39.4562 3.24595 39.2291 2.6754 38.8198 2.24237C38.4104 1.80934 37.8495 1.5463 37.2508 1.50665C34.7692 1.45796 32.2897 1.67687 29.8562 2.15948C26.4912 2.58799 23.2812 3.81363 20.5 5.73182"
            stroke="#5FF0BD"
            strokeWidth={3}
            strokeLinecap="round"
            strokeLinejoin="round"
          />
        </svg>
      ),
    },
  ];

  return (
    <div className="pt-[160px] flex flex-col gap-[74px] max-w-[1920px] mx-auto px-4 md:px-8 lg:px-14 xl:px-24">
      {/* TOP TEXT BLOCK */}
      <motion.div
        className="flex flex-col gap-10"
        variants={textGroupVariants}
        initial="hidden"
        whileInView="visible"
        viewport={{ once: true, amount: 0.2 }}
      >
        <motion.h3
          className="text-[50px]/[100%] text-white"
          variants={textItemVariants}
        >
          The Agent Ecosystem
        </motion.h3>

        <motion.p
          className="text-[#848480] text-[26px]/[100%]"
          variants={textItemVariants}
        >
          Specialized AI Agents that think like Engineers
        </motion.p>

        <motion.span
          className="text-white text-2xl"
          variants={textItemVariants}
        >
          Each Heliorix Agent focuses on a specific engineering discipline ---{" "}
          together, they create an intelligent
          <br /> design workforce.
        </motion.span>
      </motion.div>

      {/* CARDS GRID */}
      <motion.div
        className="grid grid-cols-2 gap-y-10 gap-x-11"
        variants={cardsContainerVariants}
        initial="hidden"
        whileInView="visible"
        viewport={{ once: true, amount: 0.25 }}
      >
        {data.map((item, idx) => (
          <motion.div
            key={idx}
            className="px-16 pt-16 pb-9 bg-[#131313] rounded-[28px] flex flex-col gap-10"
            variants={cardVariants}
            whileHover={{
              y: -8,
              scale: 1.02,
              transition: { duration: 0.25, ease: "easeOut" },
            }}
            whileTap={{ scale: 0.99, y: -2 }}
          >
            <div className="flex items-center gap-10">
              <span className="shrink-0">{item.icon}</span>
              <h5 className="text-white text-4xl">{item.title}</h5>
            </div>

            <div className="flex flex-col gap-4">
              <p className="text-white text-xl font-light">
                {item.description}
              </p>
              <span className="text-[#848480] text-lg font-light">
                {item.subtitle}
              </span>
            </div>
          </motion.div>
        ))}
      </motion.div>
    </div>
  );
}
